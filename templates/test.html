{% extends "base.html" %}
{% block content %}
    <div class="">
			<h1>{{user.username}}</h1>
			{% if flag %}
			 <img src="{{allprophoto.profilephoto.url}}" alt="" style="height:300px;width:300px;">
			{% else %}
			<a href="{% url 'accounts:proPic' %}"><img src="/static/images/uploadphoto.png" alt="" style="height:300px;width:300px;"></a>
		 {% endif %}
    </div>
<div class="camera1">


	<table><tr><td valign=top>
		<h1>JPEGCam Test Page</h1>

		<!-- First, include the JPEGCam JavaScript Library -->
		<script type="text/javascript" src="/static/jpegcam/webcam.js"></script>

		<!-- Configure a few settings -->
		<script language="JavaScript">
			webcam.set_api_url( '/user/' );
			webcam.set_quality( 90 ); // JPEG quality (1 - 100)
			webcam.set_shutter_sound( true ); // play shutter click sound
		</script>

		<!-- Next, write the movie to the page at 320x240 -->
		<script language="JavaScript">
			document.write( webcam.get_html(320, 240) );
		</script>

		<!-- Some buttons for controlling things -->
		<br/><form>
			{# <input type=button value="Configure..." onClick="webcam.configure()">#}
			&nbsp;&nbsp;
			<input type=button value="Take Snapshot" onClick="take_snapshot()">
		</form>

		<!-- Code to handle the server response (see test.php) -->
		<script language="JavaScript">
			webcam.set_hook( 'onComplete', 'my_completion_handler' );

			function take_snapshot() {
				// take snapshot and upload to server
				document.getElementById('upload_results').innerHTML = '<h1>Uploading...</h1>';
				webcam.snap();
			}

			function my_completion_handler(msg) {
				if (msg.match(/(http\:\/\/\S+)/)) {
					var image_url = RegExp.$1;
					// show JPEG image in page
	     window.location.href = "http://127.0.0.1:8000/emotion/";
					document.getElementById('upload_results').innerHTML =
						'<h2>Processing Your Image</h2>';
					// reset camera for another shot
					webcam.reset();
				}
				else alert("Python Error: " + msg);
			}
		</script>

		</td><td width=50>&nbsp;</td><td valign=top>
			<div id="upload_results" style="background-color:#eee;"></div>
		</td></tr></table>

</div>



	{% endblock %}
